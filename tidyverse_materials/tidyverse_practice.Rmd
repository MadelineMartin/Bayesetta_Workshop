---
title: "Tidyverse Tutorial"
output: html_notebook
---

If tidyverse and/or tidymodels is not installed yet, you can install the 
packages by using `install.packages("tidyverse")`.

First, we need to load the tidyverse (or tidymodels) library. Uncomment one of 
the libraries and run the code block. 
```{r}
# library(tidyverse)
# library(tidymodels)
```


Now, we are going to load in the "bayesetta_tidyverse_dr_data.csv" using 
`readr::read_csv()`
```{r}
dr_data_orig <- readr::read_csv("path/to/local/workshop_directory/bayesetta_tidyverse_dr_data.csv")
dr_data <- dr_data_orig
dr_data
```

We can see in the data set there's some inconsistencies: 
- there's lower and upper case letters for drug
- the temp_C can be rounded to 0 decimal places
- and the date is not in proper datetime format


Let's start with fixing the drug column so all letters are uppercase. 
- Pipe the data's drug column to `str_replace()`
- Define the pattern and replacement (hint: use toupper as the replacement 
   variable) 
- Assign that to the drug column and display `dr_data` (type dr_data on the 
   last line)

```{r}
dr_data$drug <- dr_data$drug %>%
  ...

dr_data
```

Change temp_C to have 2 significant figures using the `signif()` function. 

```{r}
 
```

Use `readr::parse_date()` to fix the date format. Use `format = "%m/%d/%Y"`

```{r}
 
```

To practice more tidyverse, let's use `mutate()` the data.frame to add a 
`percent_response` column with sigfigs to one decimal place and relocate 
(`relocate()`) it to before "normalized_response".  

```{r}
 
```

Let's group by "drug" and use `summarise()` to see the min, max percent 
response, and number of observations (`n()`).

```{r}

```

Let's look at just drug A's dose and percent response in order of decreasing 
dose using `filter()`, `select()`, and `arrange()`. 
Assign this to a variable named `dr_drug_A`.

```{r}

```

Now let's make a simple ggplot (`ggplot()`) of the drug A data points 
(`geom_point()`). You will need to add `scale_x_log10()` for the best display of 
the data points and plot. Try adding a theme (`theme_bw()`), labels (`labs()`), 
and changing colors, point and text size, etc.!

```{r}
ggplot(dr_drug_A) +
  geom_point() + 
  ...
```


Now lets plot all the drugs from the data and use `facet_wrap()` to separate 
each drug into their own plot.

```{r}

```

There's some of the basics of tidyverse! We will use this dataset for dose
response modeling later!

Save the cleaned data using `readr::write_csv()`. first put the data name then 
your local path for the workshop and a new file name 
(i.e. "clean_bayesetta_dr_data.csv").

```{r}

```

